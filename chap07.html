<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Link</title>
<link href="stylesheet.css" type="text/css" rel="stylesheet" />
</head>
<body>
<div id="leanpub-main">
<h2 id="link">Link</h2>

<p>
  <em>You do not need internet access if you want to follow examples in this chapter.</em>
</p>

<p>
  <em>All examples in this chapter are tried on Ruby 1.9.2p290, RubyGems 1.8.11:</em>
</p>

<ul><li><em>Mac OS 10.6.8: Firefox 8 and watir-webdriver 0.3.9</em></li>
  <li><em>Microsoft Windows 7 Professional 32-bit, Service Pack 1, Internet Explorer 9 and watir 2.0.4</em></li>
</ul><p>
  <em>Note: safariwatir does not support a lot of features that are used in this chapter.</em>
</p>

<h3 id="html-tag">HTML tag</h3>

<p>Let&#x2019;s take a closer look at one HTML element. Links are probably the most popular of all HTML elements, so it would be just fair to start there. Usually, you can recognize a link on a web page because it&#x2019;s text is underlined. It&#x2019;s HTML looks like this:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;a</code> <code class="na">href=</code><code class="s">"clicked.htm"</code><code class="nt">&gt;</code>click me<code class="nt">&lt;/a&gt;</code>
</pre></div>

</div>

<p>There are two ways of accessing the link, <code>browser.a</code> and <code>browser.link</code>. Both of them do the same thing, but <code>browser.a</code> is not supported in older versions of watir gem and in safariwatir.</p>

<p>You could access the link in a lot of ways (alphabetically): <code>after?</code>, <code>class</code>, <code>css</code>, <code>href</code>, <code>html</code>, <code>id</code>, <code>index</code>, <code>name</code>, <code>text</code>, <code>title</code>, <code>url</code>, <code>xpath</code> and multiple attributes.</p>

<p>Examples:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno"> 1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">after</code>? <code class="p">=</code><code class="o">&gt;</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">text</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">buy</code>"<code class="p">))</code>
<code class="lineno"> 2</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">class</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">header</code>"<code class="p">)</code>
<code class="lineno"> 3</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">css</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="p">[</code><code class="n">id</code><code class="p">=</code><code class="n">click</code><code class="o">-</code><code class="n">me</code><code class="p">]</code>"<code class="p">).</code><code class="n">click</code>
<code class="lineno"> 4</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">href</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">clicked</code><code class="p">.</code><code class="n">htm</code>"<code class="p">)</code>
<code class="lineno"> 5</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">html</code> <code class="p">=</code><code class="o">&gt;</code> <code class="o">/</code><code class="n">test</code><code class="o">/</code><code class="p">)</code>
<code class="lineno"> 6</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">id</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">footer</code>"<code class="p">)</code>
<code class="lineno"> 7</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">index</code> <code class="p">=</code><code class="o">&gt;</code> 1<code class="p">)</code>
<code class="lineno"> 8</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">name</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">sidebar</code><code class="p">)</code>
<code class="lineno"> 9</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">text</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">click</code> <code class="n">me</code>"<code class="p">)</code>
<code class="lineno">10</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">title</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">click</code> <code class="n">me</code>"<code class="p">)</code>
<code class="lineno">11</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">url</code> <code class="p">=</code><code class="o">&gt;</code> <code class="o">/</code><code class="n">watir</code><code class="o">/</code><code class="p">)</code>
<code class="lineno">12</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">xpath</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="o">//</code><code class="n">a</code><code class="p">[@</code><code class="n">href</code><code class="p">=</code><code class="s">'clicked.htm'</code><code class="p">]</code><code class="o">/</code>"<code class="p">).</code><code class="n">click</code>
</pre></div>

</div>

<p>and multiple attributes:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">text</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">click</code> <code class="n">me</code>"<code class="p">,</code> <code class="n">index</code> <code class="p">=</code><code class="o">&gt;</code> 2<code class="p">)</code>
</pre></div>

</div>

<p>To make sure you could do the exercises from this chapter even without internet access, we will create two HTML files, and create a link from one to the other.</p>

<p>First, create a simple HTML file with only one link in it. Open your favorite text editor, enter the following line in it and save it as <code>link.htm</code>:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;a</code> <code class="na">href=</code><code class="s">"clicked.htm"</code><code class="nt">&gt;</code>click me<code class="nt">&lt;/a&gt;</code>
</pre></div>

</div>

<p>Then create another file, <code>clicked.htm</code> and put it in the same folder as <code>link.htm</code>. You can put anything in <code>clicked.htm</code> file, for example just text <code>Clicked!</code>.</p>

<p>You can save the files anywhere (make sure both files are in the same folder), but I suggest that you save it to desktop, it will be easy to find there. Open <code>link.htm</code> with Firefox.</p>

<div class="image-with-caption">
  <p><img src="images/text.png" alt="A simple web page with only one link." /></p><p>A simple web page with only one link.</p>
</div>

<p>Copy URL from the address bar and paste it somewhere safe, in another file, for example. In my case, URL was <code>file:///Users/zeljko/Desktop/link.htm</code>, since I have saved the file to my desktop. We will need the URL to open the same HTML page later with Watir. Close the browser.</p>

<p>Open command prompt application and open IRB (make sure you are opening command prompt as administrator if you are on Windows):</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> $ <code class="n">irb</code>
<code class="lineno">2</code> <code class="o">&gt;</code>
</pre></div>

</div>

<p>Let IRB know that you plan to use watir-webdriver or watir gem:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">require</code> "<code class="n">watir</code><code class="o">-</code><code class="n">webdriver</code>"
</pre></div>

</div>

<p>or</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">require</code> "<code class="n">watir</code>"
</pre></div>

</div>

<p>The output should look similar to this:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="o">&gt;</code> <code class="n">require</code> "<code class="n">watir</code><code class="o">-</code><code class="n">webdriver</code>"
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> <code class="n">true</code>
</pre></div>

</div>

<p>If you get something like this, do not panic:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="o">&gt;</code> <code class="n">require</code> "<code class="n">watir</code><code class="o">-</code><code class="n">webdriver</code>"
<code class="lineno">2</code> <code class="n">LoadError</code><code class="p">:</code> <code class="n">no</code> <code class="n">such</code> <code class="n">file</code> <code class="n">to</code> <code class="n">load</code> <code class="o">--</code> <code class="n">watir</code><code class="o">-</code><code class="n">webdriver</code>
<code class="lineno">3</code> <code class="n">from</code> <code class="p">(</code><code class="n">irb</code><code class="p">):</code>1<code class="p">:</code><code class="n">in</code> `<code class="n">require</code><code class="o">'</code>
<code class="lineno">4</code> <code class="n">from</code> <code class="p">(</code><code class="n">irb</code><code class="p">):</code>1
</pre></div>

</div>

<p>It just means you have to require RubyGems first. In that case, do this:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="o">&gt;</code> <code class="n">require</code> "<code class="n">rubygems</code>"
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> <code class="n">true</code>
<code class="lineno">3</code> 
<code class="lineno">4</code> <code class="o">&gt;</code> <code class="n">require</code> "<code class="n">watir</code><code class="o">-</code><code class="n">webdriver</code>"
<code class="lineno">5</code> <code class="p">=</code><code class="o">&gt;</code> <code class="n">true</code>
</pre></div>

</div>

<p>In following code examples, do not type lines that start with <code>=&gt;</code> (<code>=&gt; true</code> for example). That represents value that Ruby returned. You can ignore those lines, until I say differently.</p>

<p>Open the browser (the following code will open Firefox if you are using watir-webdriver gem, and Internet Explorer if you are using watir gem):</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code> <code class="p">=</code> <code class="n">Watir</code><code class="p">::</code><code class="n">Browser</code><code class="p">.</code><code class="n">new</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> #<code class="o">&lt;</code><code class="n">Watir</code><code class="p">::</code><code class="n">Browser</code><code class="p">:</code>0<code class="n">x2b6d7f970192e212</code> <code class="n">url</code><code class="p">=</code>"<code class="n">about</code><code class="p">:</code><code class="n">blank</code>" <code class="n">title</code><code class="p">=</code>""<code class="o">&gt;</code>
</pre></div>

</div>

<p>Go to <code>link.htm</code>:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">goto</code> "<code class="n">file</code><code class="p">:</code><code class="o">///</code><code class="n">Users</code><code class="o">/</code><code class="n">zeljko</code><code class="o">/</code><code class="n">Desktop</code><code class="o">/</code><code class="n">link</code><code class="p">.</code><code class="n">htm</code>"
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">file</code><code class="p">:</code><code class="o">///</code><code class="n">Users</code><code class="o">/</code><code class="n">zeljko</code><code class="o">/</code><code class="n">Desktop</code><code class="o">/</code><code class="n">link</code><code class="p">.</code><code class="n">htm</code>"
</pre></div>

</div>

<p>We are ready now to play with the link.</p>

<h3 id="text">Text</h3>

<p>We will start with accessing the link via <code>text</code>, since it is the most common way of accessing links. Our link looks like this:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;a</code> <code class="na">href=</code><code class="s">"clicked.htm"</code><code class="nt">&gt;</code>click me<code class="nt">&lt;/a&gt;</code>
</pre></div>

</div>

<p>There is two ways to access the link, using the exact <code>text</code>, and only part of the <code>text</code>.</p>

<h4 id="text-and-string">Text and String</h4>

<p>Since we know the exact <code>text</code> of the link, we can click it using string. But before we click the link, let&#x2019;s flash it, just to make sure we are interacting with the right link:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">text</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">click</code> <code class="n">me</code>"<code class="p">).</code><code class="n">flash</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> 10
</pre></div>

</div>

<p>Let&#x2019;s finally click the link:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">text</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">click</code> <code class="n">me</code>"<code class="p">).</code><code class="n">click</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> <code class="p">[]</code>
</pre></div>

</div>

<p><code>clicked.htm</code> file should open. Tell the browser to go back to <code>link.htm</code>, we have more exercises to finish there:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">back</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> ""
</pre></div>

</div>

<p>Browser should go back to <code>link.htm</code>.</p>

<h4 id="text-and-regular-expression">Text and Regular expression</h4>

<p>If you know only a portion of a string, you can use regular expressions. For now, think of regular expressions as a string with a strange syntax. It looks like this: <code>/click/</code>. Please notice the slashes instead of quotes.</p>

<p>When would you use regular expressions? For example, you want to click on a discussion on a forum by its title, but the title changes form <em>On Dogs (1)</em> to <em>On Dogs (2)</em> after the first reply is posted.</p>

<p>You could not use <code>"On Dogs"</code> to locate the link, because link text is <em>On Dogs (1)</em> and Watir will complain that it could not find it.</p>

<p>You could use <code>"On Dogs (1)"</code> to locate the link the first time, but when link text changes to <em>On Dogs (2)</em>, Watir will no longer be able to find the link.</p>

<p>In that case, you could tell Watir: <em>Well, I know just one part of the string.</em> and it will happily look at all strings until it finds the one that matches the portion you have provided.</p>

<p>In our example, we will use <code>/click/</code>. First, we will flash the link, and then click it. In this example we do not care if there is any text before or after <code>click</code>.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="o">&gt;</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">text</code> <code class="p">=</code><code class="o">&gt;</code> <code class="o">/</code><code class="n">click</code><code class="o">/</code><code class="p">).</code><code class="n">flash</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> 10
<code class="lineno">3</code> 
<code class="lineno">4</code> <code class="o">&gt;</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">text</code> <code class="p">=</code><code class="o">&gt;</code> <code class="o">/</code><code class="n">click</code><code class="o">/</code><code class="p">).</code><code class="n">click</code>
<code class="lineno">5</code> <code class="p">=</code><code class="o">&gt;</code> <code class="p">[]</code>
</pre></div>

</div>

<p>Of course, tell the browser to go back to <code>link.htm</code> with <code>browser.back</code>. From now on, each time <code>clicked.htm</code> opens, tell the browser to go back to <code>link.htm</code>.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">back</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> ""
</pre></div>

</div>

<h3 id="href">Href</h3>

<p>For this example, let&#x2019;s look only at the link&#x2019;s <code>href</code> attribute.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;a</code> <code class="na">href=</code><code class="s">"clicked.htm"</code><code class="nt">&gt;</code>click me<code class="nt">&lt;/a&gt;</code>
</pre></div>

</div>

<h4 id="href-and-string">Href and String</h4>

<p>If you know the full value of link&#x2019;s <code>href</code> attribute, you could use string to click the link. Of course, flash the link first, to see if everything works, then click it.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">href</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">clicked</code><code class="p">.</code><code class="n">htm</code>"<code class="p">).</code><code class="n">flash</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> 10
</pre></div>

</div>

<p>The above code will not work in watir gem, but this one will:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">href</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">file</code><code class="p">:</code><code class="o">///</code><code class="n">Users</code><code class="o">/</code><code class="n">zeljko</code><code class="o">/</code><code class="n">Desktop</code><code class="o">/</code><code class="n">clicked</code><code class="p">.</code><code class="n">htm</code>"<code class="p">).</code><code class="n">flash</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> <code class="n">nil</code>
</pre></div>

</div>

<p>Click it with</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">href</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">clicked</code><code class="p">.</code><code class="n">htm</code>"<code class="p">).</code><code class="n">click</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> <code class="p">[]</code>
</pre></div>

</div>

<p>or</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">href</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">file</code><code class="p">:</code><code class="o">///</code><code class="n">Users</code><code class="o">/</code><code class="n">zeljko</code><code class="o">/</code><code class="n">Desktop</code><code class="o">/</code><code class="n">clicked</code><code class="p">.</code><code class="n">htm</code>"<code class="p">).</code><code class="n">click</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> 0<code class="p">.</code>078119
</pre></div>

</div>

<p>Did you remember to tell tell the browser to go back to <code>link.htm</code> with <code>browser.back</code>?</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">back</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> ""
</pre></div>

</div>

<h4 id="href-and-regular-expression">Href and Regular Expression</h4>

<p>If you know only a portion of <code>href</code> attribute, you will still use <code>href</code> to locate the link, but this time with a regular expression instead of a string. The usual story: flash, click, back to <code>link.htm</code>.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">href</code> <code class="p">=</code><code class="o">&gt;</code> <code class="o">/</code><code class="n">clicked</code><code class="o">/</code><code class="p">).</code><code class="n">flash</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> 10
<code class="lineno">3</code> 
<code class="lineno">4</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">href</code> <code class="p">=</code><code class="o">&gt;</code> <code class="o">/</code><code class="n">clicked</code><code class="o">/</code><code class="p">).</code><code class="n">click</code>
<code class="lineno">5</code> <code class="p">=</code><code class="o">&gt;</code> <code class="p">[]</code>
<code class="lineno">6</code> 
<code class="lineno">7</code> <code class="n">browser</code><code class="p">.</code><code class="n">back</code>
<code class="lineno">8</code> <code class="p">=</code><code class="o">&gt;</code> ""
</pre></div>

</div>

<h3 id="url">URL</h3>

<p>
  <em>Note: watir-webdriver does not support accessing page elements via <code>url</code>.</em>
</p>

<p><code>url</code> is alias for <code>href</code>. So, everything I said about <code>href</code> is true for <code>url</code> also. Well, not everything. If you try any of the following with watir-webdriver:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">url</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">clicked</code><code class="p">.</code><code class="n">htm</code>"<code class="p">).</code><code class="n">click</code>
<code class="lineno">2</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">url</code> <code class="p">=</code><code class="o">&gt;</code> <code class="o">/</code><code class="n">clicked</code><code class="o">/</code><code class="p">).</code><code class="n">click</code>
</pre></div>

</div>

<p>you would get this error message:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">Watir</code><code class="p">::</code><code class="n">Exception</code><code class="p">::</code><code class="n">MissingWayOfFindingObjectException</code><code class="p">:</code>
<code class="lineno">2</code> <code class="n">invalid</code> <code class="n">attribute</code><code class="p">:</code> <code class="p">:</code><code class="n">url</code>
<code class="lineno">3</code> <code class="p">...</code>
</pre></div>

</div>

<p>Watir-webdriver wants to tell you that it does not support accessing links via <code>url</code> attribute. Other gems support it. Since it is just an alias for <code>href</code>, I would recommend that you use <code>href</code> everywhere.</p>

<h3 id="id">ID</h3>

<p>According to the HTML specification, almost all HTML elements can have an <code>id</code>, and each <code>id</code> should be unique on the page. Uniqueness makes <code>id</code> very convenient for us. All other element attributes can appear more than once on the page and Watir will locate only the first element with the specified attribute, and maybe you want the second or the third one. (There is a workaround for that problem, keep on reading.)</p>

<p>Open <code>link.htm</code> in your favorite text editor and change the text to this, and save the file:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;a</code> <code class="na">href=</code><code class="s">"clicked.htm"</code> <code class="na">id=</code><code class="s">"click-me"</code><code class="nt">&gt;</code>click me<code class="nt">&lt;/a&gt;</code>
</pre></div>

</div>

<p>Refresh the page in the browser to make sure the latest version of <code>link.htm</code> is loaded:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">refresh</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> <code class="p">[]</code>
</pre></div>

</div>

<h4 id="id-and-string">ID and String</h4>

<p>If you know the entire id:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">id</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">click</code><code class="o">-</code><code class="n">me</code>"<code class="p">).</code><code class="n">flash</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> 10
<code class="lineno">3</code> 
<code class="lineno">4</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">id</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">click</code><code class="o">-</code><code class="n">me</code>"<code class="p">).</code><code class="n">click</code>
<code class="lineno">5</code> <code class="p">=</code><code class="o">&gt;</code> <code class="p">[]</code>
<code class="lineno">6</code> 
<code class="lineno">7</code> <code class="n">browser</code><code class="p">.</code><code class="n">back</code>
<code class="lineno">8</code> <code class="p">=</code><code class="o">&gt;</code> ""
</pre></div>

</div>

<h4 id="id-and-regular-expression">ID and Regular Expression</h4>

<p>Sometimes <code>ids</code> on a page are automatically generated by the framework developers use, so <code>ids</code> are different every time a page is opened. Usually the portion of <code>id</code> stays the same. For example, it changes from <code>user007</code> to <code>user42</code> to <code>user123</code>. It is obvious that <code>user</code> part of the <code>id</code> is the same every time, so you can use that.</p>

<p>If our example, we will use <code>/click/</code>.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">id</code> <code class="p">=</code><code class="o">&gt;</code> <code class="o">/</code><code class="n">click</code><code class="o">/</code><code class="p">).</code><code class="n">flash</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> 10
<code class="lineno">3</code> 
<code class="lineno">4</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">id</code> <code class="p">=</code><code class="o">&gt;</code> <code class="o">/</code><code class="n">click</code><code class="o">/</code><code class="p">).</code><code class="n">click</code>
<code class="lineno">5</code> <code class="p">=</code><code class="o">&gt;</code> <code class="p">[]</code>
<code class="lineno">6</code> 
<code class="lineno">7</code> <code class="n">browser</code><code class="p">.</code><code class="n">back</code>
<code class="lineno">8</code> <code class="p">=</code><code class="o">&gt;</code> ""
</pre></div>

</div>

<h3 id="name">Name</h3>

<p>Another attribute that almost all HTML elements can have is <code>name</code>. It is not supposed to be unique on the page. It is very common that elements that are somehow related on the page have the same <code>name</code>. Change <code>link.htm</code> to this, and reload the page in the browser:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;a</code> <code class="na">href=</code><code class="s">"clicked.htm"</code> <code class="na">name=</code><code class="s">"click-me"</code><code class="nt">&gt;</code>click me<code class="nt">&lt;/a&gt;</code>
<code class="lineno">2</code> 
<code class="lineno">3</code> browser.refresh
<code class="lineno">4</code> =&gt; []
</pre></div>

</div>

<h4 id="name-and-string">Name and String</h4>

<p>If you know the entire <code>name</code>:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">name</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">click</code><code class="o">-</code><code class="n">me</code>"<code class="p">).</code><code class="n">flash</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> 10
<code class="lineno">3</code> 
<code class="lineno">4</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">name</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">click</code><code class="o">-</code><code class="n">me</code>"<code class="p">).</code><code class="n">click</code>
<code class="lineno">5</code> <code class="p">=</code><code class="o">&gt;</code> <code class="p">[]</code>
<code class="lineno">6</code> 
<code class="lineno">7</code> <code class="n">browser</code><code class="p">.</code><code class="n">back</code>
<code class="lineno">8</code> <code class="p">=</code><code class="o">&gt;</code> ""
</pre></div>

</div>

<h4 id="name-and-regular-expression">Name and Regular expression</h4>

<p>If you know the portion of <code>name</code>:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">name</code> <code class="p">=</code><code class="o">&gt;</code> <code class="o">/</code><code class="n">click</code><code class="o">/</code><code class="p">).</code><code class="n">flash</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> 10
<code class="lineno">3</code> 
<code class="lineno">4</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">name</code> <code class="p">=</code><code class="o">&gt;</code> <code class="o">/</code><code class="n">click</code><code class="o">/</code><code class="p">).</code><code class="n">click</code>
<code class="lineno">5</code> <code class="p">=</code><code class="o">&gt;</code> <code class="p">[]</code>
<code class="lineno">6</code> 
<code class="lineno">7</code> <code class="n">browser</code><code class="p">.</code><code class="n">back</code>
<code class="lineno">8</code> <code class="p">=</code><code class="o">&gt;</code> ""
</pre></div>

</div>

<h3 id="class">Class</h3>

<p>It is also very common for an HTML element to have a <code>class</code> attribute. Change <code>link.htm</code> to this, and reload the page in the browser:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;a</code> <code class="na">href=</code><code class="s">"clicked.htm"</code> <code class="na">class=</code><code class="s">"click-me"</code><code class="nt">&gt;</code>click me<code class="nt">&lt;/a&gt;</code>
<code class="lineno">2</code> 
<code class="lineno">3</code> browser.refresh
<code class="lineno">4</code> =&gt; []
</pre></div>

</div>

<h4 id="class-and-string">Class and String</h4>

<p>If you know the entire <code>class</code>:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">class</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">click</code><code class="o">-</code><code class="n">me</code>"<code class="p">).</code><code class="n">flash</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> 10
<code class="lineno">3</code> 
<code class="lineno">4</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">class</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">click</code><code class="o">-</code><code class="n">me</code>"<code class="p">).</code><code class="n">click</code>
<code class="lineno">5</code> <code class="p">=</code><code class="o">&gt;</code> <code class="p">[]</code>
<code class="lineno">6</code> 
<code class="lineno">7</code> <code class="n">browser</code><code class="p">.</code><code class="n">back</code>
<code class="lineno">8</code> <code class="p">=</code><code class="o">&gt;</code> ""
</pre></div>

</div>

<h4 id="class-and-regular-expression">Class and Regular Expression</h4>

<p>If you know the portion of <code>class</code>:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">class</code> <code class="p">=</code><code class="o">&gt;</code> <code class="o">/</code><code class="n">click</code><code class="o">/</code><code class="p">).</code><code class="n">flash</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> 10
<code class="lineno">3</code> 
<code class="lineno">4</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">class</code> <code class="p">=</code><code class="o">&gt;</code> <code class="o">/</code><code class="n">click</code><code class="o">/</code><code class="p">).</code><code class="n">click</code>
<code class="lineno">5</code> <code class="p">=</code><code class="o">&gt;</code> <code class="p">[]</code>
<code class="lineno">6</code> 
<code class="lineno">7</code> <code class="n">browser</code><code class="p">.</code><code class="n">back</code>
<code class="lineno">8</code> <code class="p">=</code><code class="o">&gt;</code> ""
</pre></div>

</div>

<h3 id="title">Title</h3>

<p>It is also very common for an HTML element to have a <code>title</code> attribute. Change <code>link.htm</code> to this, save the file and reload the page in the browser:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;a</code> <code class="na">href=</code><code class="s">"clicked.htm"</code> <code class="na">title=</code><code class="s">"click me"</code><code class="nt">&gt;</code>click me<code class="nt">&lt;/a&gt;</code>
<code class="lineno">2</code> 
<code class="lineno">3</code> browser.refresh
<code class="lineno">4</code> =&gt; []
</pre></div>

</div>

<h4 id="title-and-string">Title and String</h4>

<p>If you know the entire <code>title</code>:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">title</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">click</code> <code class="n">me</code>"<code class="p">).</code><code class="n">flash</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> 10
<code class="lineno">3</code> 
<code class="lineno">4</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">title</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">click</code> <code class="n">me</code>"<code class="p">).</code><code class="n">click</code>
<code class="lineno">5</code> <code class="p">=</code><code class="o">&gt;</code> <code class="p">[]</code>
<code class="lineno">6</code> 
<code class="lineno">7</code> <code class="n">browser</code><code class="p">.</code><code class="n">back</code>
<code class="lineno">8</code> <code class="p">=</code><code class="o">&gt;</code> ""
</pre></div>

</div>

<h4 id="title-and-regular-expression">Title and Regular Expression</h4>

<p>If you know the portion of <code>title</code>:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">title</code> <code class="p">=</code><code class="o">&gt;</code> <code class="o">/</code><code class="n">click</code><code class="o">/</code><code class="p">).</code><code class="n">flash</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> 10
<code class="lineno">3</code> 
<code class="lineno">4</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">title</code> <code class="p">=</code><code class="o">&gt;</code> <code class="o">/</code><code class="n">click</code><code class="o">/</code><code class="p">).</code><code class="n">click</code>
<code class="lineno">5</code> <code class="p">=</code><code class="o">&gt;</code> <code class="p">[]</code>
<code class="lineno">6</code> 
<code class="lineno">7</code> <code class="n">browser</code><code class="p">.</code><code class="n">back</code>
<code class="lineno">8</code> <code class="p">=</code><code class="o">&gt;</code> ""
</pre></div>

</div>

<h3 id="index">Index</h3>

<h4 id="explicit-index">Explicit Index</h4>

<p>
  <em>Note: watir and watir-webdriver use zero-based indexing, safariwatir uses one-based indexing.</em>
</p>

<p>If the link does not have any attributes that would differentiate it from the other links on the page, but you know the link&#x2019;s position on the page, you could use it&#x2019;s <code>index</code>. In this example, it is the first link.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">index</code> <code class="p">=</code><code class="o">&gt;</code> 0<code class="p">).</code><code class="n">flash</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> 10
<code class="lineno">3</code> 
<code class="lineno">4</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">index</code> <code class="p">=</code><code class="o">&gt;</code> 0<code class="p">).</code><code class="n">click</code>
<code class="lineno">5</code> <code class="p">=</code><code class="o">&gt;</code> <code class="p">[]</code>
<code class="lineno">6</code> 
<code class="lineno">7</code> <code class="n">browser</code><code class="p">.</code><code class="n">back</code>
<code class="lineno">8</code> <code class="p">=</code><code class="o">&gt;</code> ""
</pre></div>

</div>

<p>Do you see anything strange in the above code? Take a look. I will wait.</p>

<p>Maybe you have noticed that this is the first time we did not use a string (double quotes around the text, remember?) or a regular expression (slashes around the text). We have used just the number one. Such numbers are called integers. Watir uses integers only with <code>index</code>.</p>

<p>Please note that watir and watir-webdriver gems counts from 0 (0, 1, 2&#x2026;). That is called zero-based indexing. Safariwatir counts from 1 (1, 2, 3&#x2026;). That is called one-based indexing. (Watir gem used one-based indexing until versinon 2.0.) It is usual in programming that the first element is the number zero (hence zero-based indexing).</p>

<h4 id="implicit-index">Implicit Index</h4>

<p>This will do the same thing.</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">.</code><code class="n">flash</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> 10
<code class="lineno">3</code> 
<code class="lineno">4</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">.</code><code class="n">click</code>
<code class="lineno">5</code> <code class="p">=</code><code class="o">&gt;</code> <code class="p">[]</code>
<code class="lineno">6</code> 
<code class="lineno">7</code> <code class="n">browser</code><code class="p">.</code><code class="n">back</code>
<code class="lineno">8</code> <code class="p">=</code><code class="o">&gt;</code> ""
</pre></div>

</div>

<p>So, if you do not provide any arguments to <code>link</code> method, it will just click the first link it finds. It is very useful.</p>

<p>It is time for and example. If you know that the link is the first (or even the only) link inside a specific div:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;div</code> <code class="na">id=</code><code class="s">"42"</code><code class="nt">&gt;</code>
<code class="lineno">2</code>   <code class="nt">&lt;a</code> <code class="na">href=</code><code class="s">"clicked.htm"</code><code class="nt">&gt;</code>click me<code class="nt">&lt;/a&gt;</code>
<code class="lineno">3</code> <code class="nt">&lt;/div&gt;</code>
</pre></div>

</div>

<p>Save the above HTML as <code>link.htm</code>, and reload the page in the browser:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">refresh</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> <code class="p">[]</code>
</pre></div>

</div>

<p>Then try this:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">div</code><code class="p">(:</code><code class="n">id</code> <code class="p">=</code><code class="o">&gt;</code> "42"<code class="p">).</code><code class="n">link</code><code class="p">.</code><code class="n">flash</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> 10
<code class="lineno">3</code> 
<code class="lineno">4</code> <code class="n">browser</code><code class="p">.</code><code class="n">div</code><code class="p">(:</code><code class="n">id</code> <code class="p">=</code><code class="o">&gt;</code> "42"<code class="p">).</code><code class="n">link</code><code class="p">.</code><code class="n">click</code>
<code class="lineno">5</code> <code class="p">=</code><code class="o">&gt;</code> <code class="p">[]</code>
<code class="lineno">6</code> 
<code class="lineno">7</code> <code class="n">browser</code><code class="p">.</code><code class="n">back</code>
<code class="lineno">8</code> <code class="p">=</code><code class="o">&gt;</code> ""
</pre></div>

</div>

<h3 id="after">After</h3>

<p>
  <em>Note: watir-webdriver does not support accessing page elements via <code>after</code>.</em>
</p>

<p>Sometimes the only way to identify the element is to say that it should be after another element. Take a look at this example:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;a</code> <code class="na">href=</code><code class="s">"clicked.htm"</code><code class="nt">&gt;</code>click me<code class="nt">&lt;/a&gt;</code>
<code class="lineno">2</code> <code class="nt">&lt;a</code> <code class="na">href=</code><code class="s">"clicked.htm"</code> <code class="na">id=</code><code class="s">"click-me"</code><code class="nt">&gt;</code>click me<code class="nt">&lt;/a&gt;</code>
<code class="lineno">3</code> <code class="nt">&lt;a</code> <code class="na">href=</code><code class="s">"clicked.htm"</code><code class="nt">&gt;</code>click me<code class="nt">&lt;/a&gt;</code>
</pre></div>

</div>

<p>Save the above HTML as <code>link.htm</code>, and reload the page in the browser:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">refresh</code>
<code class="lineno">2</code> <code class="p">=</code><code class="o">&gt;</code> <code class="p">[]</code>
</pre></div>

</div>

<p>This will flash the first link, but we want to flash the third one:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">href</code> <code class="p">=</code><code class="o">&gt;</code> <code class="o">/</code><code class="n">click</code><code class="o">/</code><code class="p">).</code><code class="n">flash</code>
</pre></div>

</div>

<p>One of the ways you could do it is, but looks like watir-webdriver does not support <code>after</code>:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">after</code>? <code class="p">=</code><code class="o">&gt;</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">id</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">click</code><code class="o">-</code><code class="n">me</code>"<code class="p">)).</code><code class="n">flash</code>
<code class="lineno">2</code> <code class="n">TypeError</code><code class="p">:</code> <code class="n">expected</code> <code class="n">one</code> <code class="n">of</code> <code class="p">[</code><code class="n">String</code><code class="p">,</code> <code class="n">Regexp</code><code class="p">],</code>
<code class="lineno">3</code> <code class="n">got</code> #<code class="o">&lt;</code><code class="n">Watir</code><code class="p">::</code><code class="n">Anchor</code><code class="p">:</code>0<code class="n">x3308eea0e6878cb6</code> <code class="n">located</code><code class="p">=</code><code class="n">false</code>
<code class="lineno">4</code> <code class="n">selector</code><code class="p">={:</code><code class="n">id</code><code class="p">=</code><code class="o">&gt;</code>"<code class="n">click</code><code class="o">-</code><code class="n">me</code>"<code class="p">,</code> <code class="p">:</code><code class="n">tag_name</code><code class="p">=</code><code class="o">&gt;</code>"<code class="n">a</code>"<code class="p">}</code><code class="o">&gt;</code><code class="p">:</code><code class="n">Watir</code><code class="p">::</code><code class="n">Anchor</code>
<code class="lineno">5</code> <code class="p">...</code>
</pre></div>

</div>

<p>We told Watir that we want to click a link after a div that has <code>id</code> attribute set to <code>click-me</code>. I rarely use it, but there are times when it is really handy.</p>

<p>Do you see something strange in the above code? This is the first time we have used a page element as the second parameter (instead of string, regular expression or integer).</p>

<h3 id="html">HTML</h3>

<p>
  <em>Note: watir-webdriver does not support accessing page elements via <code>html</code>.</em>
</p>

<p>If the link you want to access does not have any usual attributes that could uniquely identify it, Watir can handle that too. For example, you need to click the second link:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;a</code> <code class="na">href=</code><code class="s">"clicked.htm"</code> <code class="na">onclick=</code><code class="s">"new Ajax.Request('007')"</code><code class="nt">&gt;</code>click me<code class="nt">&lt;/a&gt;</code>
<code class="lineno">2</code> <code class="nt">&lt;a</code> <code class="na">href=</code><code class="s">"clicked.htm"</code> <code class="na">onclick=</code><code class="s">"new Ajax.Request('42')"</code><code class="nt">&gt;</code>click me<code class="nt">&lt;/a&gt;</code>
</pre></div>

</div>

<p>One of the really elegant ways to do it is by using <code>html</code>:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">html</code> <code class="p">=</code><code class="o">&gt;</code> <code class="o">/</code>007<code class="o">/</code><code class="p">).</code><code class="n">click</code>
</pre></div>

</div>

<p>In above example, we have used a regular expression as the second parameter, but I am sure you have already gotten used to them. I am also sure you are already convinced that regular expressions are very useful.</p>

<h3 id="css">CSS</h3>

<p>
  <em>Note: watir-webdriver does not support accessing page elements via <code>css</code>.</em>
</p>

<p>CSS selectors are a pretty new addition to Watir, but a powerful one.</p>

<p>For example, if you have a link:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;a</code> <code class="na">href=</code><code class="s">"clicked.htm"</code> <code class="na">id=</code><code class="s">"click-me"</code><code class="nt">&gt;</code>click me<code class="nt">&lt;/a&gt;</code>
</pre></div>

</div>

<p>you could click it with</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">css</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">a</code>"<code class="p">).</code><code class="n">flash</code>
</pre></div>

</div>

<p>or, if you prefer to be more explicit:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">css</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="p">[</code><code class="n">id</code><code class="p">=</code><code class="n">click</code><code class="o">-</code><code class="n">me</code><code class="p">]</code>"<code class="p">).</code><code class="n">click</code>
</pre></div>

</div>

<p>This is just one example. There will be entire chapter on CSS selectors.</p>

<h3 id="xpath">XPath</h3>

<p>XPath was not in Watir from the beginning. It was added by Angrez Singh. He also created Watir&#x2019;s Firefox driver. Aidy Lewis moved Watir&#x2019;s XPath implementation from REXML to Nokogiri, and now it is faster. XPath is really powerful. Most times you can just use <code>html</code>, but if it does not solve the problem, try XPath.</p>

<h4 id="xpath-1">XPath</h4>

<p>If you have a link:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;a</code> <code class="na">href=</code><code class="s">"clicked.htm"</code> <code class="na">id=</code><code class="s">"click-me"</code><code class="nt">&gt;</code>click me<code class="nt">&lt;/a&gt;</code>
</pre></div>

</div>

<p>You could click it with:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">xpath</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="o">//</code><code class="n">a</code>"<code class="p">).</code><code class="n">click</code>
</pre></div>

</div>

<p>Or, if you would like to be more explicit:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">xpath</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="o">//</code><code class="n">a</code><code class="p">[@</code><code class="n">id</code><code class="p">=</code><code class="s">'click-me'</code><code class="p">]</code>"<code class="p">).</code><code class="n">click</code>
</pre></div>

</div>

<h4 id="elementbyxpath">Element_by_xpath</h4>

<p>
  <em>Note: watir gem does not support <code>flash</code> with <code>element_by_xpath</code>.</em>
</p>

<p>Another way, especially useful if the element you are trying to access is not supported by Watir:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">element_by_xpath</code><code class="p">(</code>"<code class="o">//</code><code class="n">a</code>"<code class="p">).</code><code class="n">click</code>
</pre></div>

</div>

<p>Or, the more explicit way:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">element_by_xpath</code><code class="p">(</code>"<code class="o">//</code><code class="n">a</code><code class="p">[@</code><code class="n">id</code><code class="p">=</code><code class="s">'click-me'</code><code class="p">]</code>"<code class="p">).</code><code class="n">click</code>
</pre></div>

</div>

<h4 id="frames">Frames</h4>

<p>
  <em>Note: note tested.</em>
</p>

<p>At the moment, you can use XPath to access elements located in a frame, but you can not use XPath to access the frame itself. In another words, this would work:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">frame</code><code class="p">(:</code><code class="n">name</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">one</code>"<code class="p">).</code><code class="n">link</code><code class="p">(</code>
<code class="lineno">2</code>   <code class="p">:</code><code class="n">xpath</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="o">//</code><code class="n">a</code><code class="p">[@</code><code class="n">href</code><code class="p">=</code><code class="s">'clicked.htm'</code><code class="p">]</code><code class="o">/</code>"<code class="p">).</code><code class="n">click</code>
</pre></div>

</div>

<p>but this would not:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">frame</code><code class="p">(:</code><code class="n">xpath</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="o">//</code><code class="n">frame</code><code class="p">[@</code><code class="n">name</code><code class="p">=</code><code class="s">'one'</code><code class="p">]</code><code class="o">/</code>"<code class="p">)</code>
</pre></div>

</div>

<p>There will be entire chapter on XPath, so I will not go into a lot of detail here.</p>

<h3 id="multiple-attributes">Multiple Attributes</h3>

<p>
  <em>Note: watir and watir-webdriver use zero-based indexing, safariwatir uses one-based indexing.</em>
</p>

<p>Accessing an element using multiple attributes was not in Watir from the start. This is a killer feature, as you will see. For example, if you have two completely identical links on the same page:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code>   <code class="nt">&lt;a</code> <code class="na">href=</code><code class="s">"clicked.htm"</code><code class="nt">&gt;</code>click me<code class="nt">&lt;/a&gt;</code>
<code class="lineno">2</code>   <code class="nt">&lt;a</code> <code class="na">href=</code><code class="s">"clicked.htm"</code><code class="nt">&gt;</code>click me<code class="nt">&lt;/a&gt;</code>
</pre></div>

</div>

<p>and you want to click the second one, you could do it like this:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">a</code><code class="p">(:</code><code class="n">text</code> <code class="p">=</code><code class="o">&gt;</code> "<code class="n">click</code> <code class="n">me</code>"<code class="p">,</code> <code class="p">:</code><code class="n">index</code> <code class="p">=</code><code class="o">&gt;</code> 1<code class="p">).</code><code class="n">click</code>
</pre></div>

</div>

<p>This is just one example. There will be entire chapter on multiple attributes.</p>

<h3 id="collection">Collection</h3>

<p>You can even do stuff with all elements of a particular kind on a page. For example, if you have a page that looks like this:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="nt">&lt;a</code> <code class="na">href=</code><code class="s">"clicked.htm"</code><code class="nt">&gt;</code>click me<code class="nt">&lt;/a&gt;</code>
<code class="lineno">2</code> <code class="nt">&lt;a</code> <code class="na">href=</code><code class="s">"clicked.htm"</code><code class="nt">&gt;</code>click me<code class="nt">&lt;/a&gt;</code>
</pre></div>

</div>

<p>and you would want to display text of all links from the page, this will do it:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">browser</code><code class="p">.</code><code class="n">as</code><code class="p">.</code><code class="n">each</code> <code class="n">do</code> <code class="o">|</code><code class="n">a</code><code class="o">|</code>
<code class="lineno">2</code>   <code class="n">puts</code> <code class="n">a</code><code class="p">.</code><code class="n">text</code>
<code class="lineno">3</code> <code class="k">end</code>
</pre></div>

</div>

<p>The output should look like this:</p>

<div class="code-block">
<div class="highlight"><pre><code class="lineno">1</code> <code class="n">click</code> <code class="n">me</code>
<code class="lineno">2</code> <code class="n">click</code> <code class="n">me</code>
</pre></div>

</div>

<p>This is just one example. There will be entire chapter on collections.</p>
</div>
<div id="leanpub-toc">
<h2>Table of Contents</h2>
<ol class="toc">
<li class="chapter"><a href="chap00.html#license">License</a></li>
<li class="chapter"><a href="chap01.html#about-the-book">About the Book</a></li>
<li class="chapter"><a href="chap02.html#prerequisites">Prerequisites</a></li>
<li class="chapter"><a href="chap03.html#about-watir">About Watir</a></li>
<li class="section"><a href="chap03.html#what-can-it-do">What can it do?</a></li>
<li class="section"><a href="chap03.html#what-it-can-not-do">What it can not do?</a></li>
<li class="section"><a href="chap03.html#recorders">Recorders</a></li>
<li class="section"><a href="chap03.html#gems">Gems</a></li>
<li class="section"><a href="chap03.html#alternatives">Alternatives</a></li>
<li class="chapter"><a href="chap04.html#installation">Installation</a></li>
<li class="section"><a href="chap04.html#windows-7-vista-and-xp">Windows 7, Vista and XP</a></li>
<li class="section"><a href="chap04.html#mac-os-x-108-107-106-and-105">Mac OS X 10.8, 10.7, 10.6 and 10.5</a></li>
<li class="section"><a href="chap04.html#ubuntu-linux-1104">Ubuntu Linux 11.04</a></li>
<li class="chapter"><a href="chap05.html#watir-in-five-minutes">Watir in Five Minutes</a></li>
<li class="chapter"><a href="chap06.html#html-elements-supported-by-watir">HTML Elements Supported by Watir</a></li>
<li class="chapter"><a href="chap07.html#link">Link</a></li>
<li class="section"><a href="chap07.html#html-tag">HTML tag</a></li>
<li class="section"><a href="chap07.html#text">Text</a></li>
<li class="section"><a href="chap07.html#href">Href</a></li>
<li class="section"><a href="chap07.html#url">URL</a></li>
<li class="section"><a href="chap07.html#id">ID</a></li>
<li class="section"><a href="chap07.html#name">Name</a></li>
<li class="section"><a href="chap07.html#class">Class</a></li>
<li class="section"><a href="chap07.html#title">Title</a></li>
<li class="section"><a href="chap07.html#index">Index</a></li>
<li class="section"><a href="chap07.html#after">After</a></li>
<li class="section"><a href="chap07.html#html">HTML</a></li>
<li class="section"><a href="chap07.html#css">CSS</a></li>
<li class="section"><a href="chap07.html#xpath">XPath</a></li>
<li class="section"><a href="chap07.html#multiple-attributes">Multiple Attributes</a></li>
<li class="section"><a href="chap07.html#collection">Collection</a></li>
<li class="chapter"><a href="chap08.html#img">Img</a></li>
<li class="section"><a href="chap08.html#src">Src</a></li>
<li class="section"><a href="chap08.html#alt">Alt</a></li>
<li class="chapter"><a href="chap09.html#button">Button</a></li>
<li class="chapter"><a href="chap10.html#checkbox">Checkbox</a></li>
<li class="section"><a href="chap10.html#click">Click</a></li>
<li class="section"><a href="chap10.html#set">Set</a></li>
<li class="section"><a href="chap10.html#clear">Clear</a></li>
<li class="chapter"><a href="chap11.html#radio">Radio</a></li>
<li class="section"><a href="chap11.html#click-1">Click</a></li>
<li class="section"><a href="chap11.html#set-1">Set</a></li>
<li class="section"><a href="chap11.html#clear-1">Clear</a></li>
<li class="chapter"><a href="chap12.html#collections">Collections</a></li>
<li class="chapter"><a href="chap13.html#nested-elements">Nested Elements</a></li>
<li class="section"><a href="chap13.html#simple-nesting">Simple Nesting</a></li>
<li class="section"><a href="chap13.html#more-nesting">More nesting</a></li>
<li class="chapter"><a href="chap14.html#about-watir-extended-version">About Watir, Extended Version</a></li>
<li class="section"><a href="chap14.html#history">History</a></li>
<li class="section"><a href="chap14.html#today">Today</a></li>
<li class="section"><a href="chap14.html#future">Future</a></li>
</ol>
</div>
</body>
</html>
